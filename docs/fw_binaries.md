configuration:
 * path: the binary can be obtained from the SAM-BA ISP sources e.g.
 	applet-lowlevel\_sama5d3-generic\_sram.bin
 * console\_instance: board-specific
 * console\_ioset: board-specific

**extram:** SAM-BA ISP applet used to initialize external RAM.

configuration:
 * path: the binary can be obtained from the SAM-BA ISP sources e.g.
 	applet-extram\_sama5d3-generic\_sram.bin
 * preset: board-specific, check your DDR model, e.g. "DDR2\_MT47H128M16:Preset
 	2 (2 x MT47H128M16)" supported presets are listed in
 	snagrecover/firmware/samba\_applet.py
 * console\_instance: board-specific
 * console\_ioset: board-specific

**u-boot:** U-Boot binary. Make sure that `CONFIG_SKIP_LOWLEVEL_INIT`
 and `CONFIG_SYS_ARM_MMU` are both disabled!

configuration:
 * path
 * address: check the value of CONFIG\_TEXT\_BASE in your  u-boot configuration

## For NXP i.MX6/7 SoCs

### Option1: Use dcd to initialize the external RAM

[example](../src/snagrecover/templates/imx7-colibri-imx7d.yaml)

**u-boot-with-dcd:** For some boards, you can build the `u-boot.imx` target in
U-Boot which contains an IVT header + a DCD + U-Boot proper. The DCD will be
used to initialize external RAM and U-Boot proper will be installed immediately
after this.

configuration:
 * path

### Option 2: Use SPL to initialize the external RAM

[example](../src/snagrecover/templates/var-som-mx6.yaml)

**SPL:** IVT header + U-BOOT SPL to be loaded in OCRAM. You can generate this
by compiling the SPL target in U-Boot. SPL should support SDP. You should not
modify the default USB gadget VID/PID values, as they are used by snagrecover
to match protocols.

configuration:
 * path

**u-boot:** IVT header + U-BOOT proper to be loaded in external RAM.
You can generate this by compiling the u-boot.imx target in U-Boot.

configuration:
 * path

## For NXP i.MX8, i.MX28 , i.MX91 and i.MX93 devices

[example](../src/snagrecover/templates/imx8-dart-mx8m-mini.yaml)

The process for generating the bootloader firmware for i.MX8 SoCs is highly
vendor and board specific. We recommend that you follow your board vendorâ€™s
tutorial to generate a recovery sd card image , then dump the start of this sd
card image (up to the start of the first partition) into a flash.bin file. For
i.MX28 SoCs, the required binary can be generated with the u-boot.sb target in
U-Boot.

**flash-bin:** This should contain at least spl and u-boot. The precise image
structure depends on the SoC and build process.

configuration:
 * path

## For TI AM335x devices

[example](../src/snagrecover/templates/am335x-beaglebone-black.yaml)

**spl:** First stage bootloader. Build the spl/u-boot-spl.bin target for your
board in U-Boot mainline. If recovering via UART, SPL should be built with
CONFIG\_SPL\_YMODEM_SUPPORT enabled. If recovering via USB, the USB Ethernet
gadget should be enabled, which implies the following options:

```bash
CONFIG\_SPL\_NET\_SUPPORT=y
CONFIG\_SPL\_NET\_VCI\_STRING="AM335x U-Boot SPL"
CONFIG\_SPL\_USB\_GADGET\_SUPPORT=y
CONFIG\_SPL\_USB\_ETHER=y
# CONFIG\_SPL\_USB\_SDP\_SUPPORT is not set
```

configuration:
 * path

**u-boot:** Second stage bootloader. Build the u-boot.img target in U-Boot.

configuration:
 * path

**Warning:** If recovering via usb, check the config\_sys\_bootfile\_prefix option in
your spl configuration. it could impose constraints on how you name your u-boot
binary file.

## For Allwinner SUNXI devices

### Option 1: Single SPL+U-Boot binary

[example](../src/snagrecover/templates/sunxi-orangepi-pc.yaml)

**u-boot-with-spl:** Described in sunxi-u-boot.dtsi. For arm64 SOCs, this
contains: sunxi-spl.bin + nonfit or FIT container with u-boot-nodtb,bl31,
[scp.bin], @fdt-SEQ. For arm32 SOCs: sunxi-spl.bin + nonfit or FIT container
with u-boot-img. This binary usually corresponds to the
u-boot-sunxi-with-spl.bin file generated by a U-Boot build.

### Option 2: Separate SPL and U-Boot binaries

**spl:** SPL with an eGON header, you can typically use sunxi-spl.bin for this

configuration:
 * path

**u-boot:** Same as the u-boot-with-spl firmware from option 1 but without the
SPL part, you can typically use u-boot.img for this

configuration:
 * path

## For TI AM62x/AM62Ax/AM62Px/AM64x/AM62Lx/AM62Dx devices

[example](../src/snagrecover/templates/am625-beagle-play.yaml)

Instructions for building the required images can be found in various locations
depending on your SoC and board model. In general, your board vendor's
documentation should be the first place to check. For evaluation kits, you can
either check the [U-Boot documentation](https://u-boot.readthedocs.io/en/latest/board/ti/)
or the TI SDK documentation for your SoC. When building tiboot3, please make
sure that your configuration supports booting from DFU.

The following images are required for all AM6xx SoCs:

**tiboot3:** X.509 certificate container with U-Boot SPL for R5, TIFS, and a FIT
container with device tree blobs. SPL should support DFU. For AM62Lx, instead of
U-Boot SPL for R5, it contains Pre-BL and there is no fit container with device
tree blobs.

configuration:
 * path

**u-boot:** FIT container with U-Boot proper for A53 and device tree blobs

configuration:
 * path

**tispl:** FIT container with ATF FOR A53, OPTEE (not necessary for recovery),
DM firmware, U-Boot SPL for A53 and device tree blobs. For AM62Lx, X.509 certificate
container with ATF for A53, OPTEE, U-Boot SPL for A53, device tree blobs and
TIFS.

configuration:
 * path

## For Xilinx ZynqMP devices

[example](../src/snagrecover/templates/zynqmp-generic.yaml)

Detailed instructions for building the required boot images can be found in the
[Xilinx documentation](https://xilinx.github.io/Embedded-Design-Tutorials), in
the "boot-and-configuration" section for ZynqMP SoCs. Please note that the
first boot image containing only the FSBL and PMUFW should not be required, as
Snagboot is capable of extracting a working first-stage boot image from the
full boot image.

The following images are required for all ZynqMP SoCs:

**boot:** Xilinx ZynqMP boot image containing the Xilinx FSBL, PMUFW, ATF,
control DT and U-Boot proper. The FSBL should be compiled with USB support
enabled.

configuration:
 * path

**fsbl:** (optional) Xilinx ZynqMP boot image containing the Xilinx FSBL and
PMUFW. This is optional, and should only be provided if Snagboot fails to
extract the FSBL and PMUFW from the complete boot image.

configuration:
 * path

## For Intel Keembay devices

[example](../src/snagrecover/templates/keembay-generic.yaml)

Intel Keembay boards use a Firmware Image Package (FIP) to boot the board
in recovery mode.

**fip:** Firmware Image Package containing the ATF and u-boot firmware
necessary to initialize the board.

configuration:
 * path: Path to the FIP file. The filename should match the board model:
   - For EVM boards: `fip-evm.bin`
   - For M2 boards: `fip-m2.bin`
   - For HDDL2 boards: `fip-hddl2.bin`


## For Broadcom BCM devices

[example](../src/snagrecover/templates/bcm2711.yaml)

In the case of Raspberry Pi, most firmwares can be found in their GitHub repositories [github.com/raspberrypi](https://github.com/raspberrypi/)
along with a [genimage.cfg](https://github.com/raspberrypi/buildroot/blob/mass-storage-gadget64/board/raspberrypi64-mass-storage-gadget/genimage.cfg) file wich can be taken as a reference for building the DOS partition image using the [genimage](https://github.com/pengutronix/genimage) tool.


**bootfiles:** tar archive containing the FSBL and some of the firmwares required by the FSBL to boot U-Boot. Firmwares can optionally be located inside of a subfolder, named 2711|2712 for bcm2711|bcm2712 respectively.
 - bootcode\<n>.bin: the FSBL, which acts as USB client requesting firmware to load. For bootcode, \<n> is 4|5 for bcm2711|bcm2712 respectively.
 - mcb.bin: RAM init
 - memsys\<nn>.bin: more RAM inits
 - bootmain: the loader for the disk image

In the case of Raspberry Pi, a ready made "bootfiles" firmware can be found [here](https://github.com/raspberrypi/usbboot/commit/798ea2ef893bfa11fe3dba0e088cbc9b862184a1).

configuration:
 * path


**boot:** DOS partition table image with the first partition bootable with a FAT filesystem containing:
 - \<board>.dtb: the compiled device tree, loaded in memory by `start<n>.elf` and used by U-Boot
 - \<board>.dtbo: the device tree overlays
 - config.txt: a file which specifies to `start<n>.elf` to boot U-Boot proper instead of Linux (`kernel=u-boot.bin`) and to start in 64 bits mode (`arm_64bit=1`)
 - cmdline.txt: linux kernel command line, as we don't boot linux you can keep it empty.
 - start\<n>.elf: the SSBL
 - fixup\<n>.dat: the SSBL linker file (found in pair with start\<n>.elf)
 - U-Boot proper (`u-boot.bin`)

 This DOS partition image can be generated using the `genimage` tool. In the case of Raspberry Pi, [ready made images already exists](https://github.com/raspberrypi/usbboot/blob/master/mass-storage-gadget64/boot.img), however they do not contain a U-Boot but a Linux. **If you use them, you must provide U-Boot separately using the "u-boot" firmware section**. In that case, Snagrecover will create a temporary copy of it and do what is necessary to boot U-Boot instead of Linux.

configuration:
 * path


**config:** config text file with parameter to setup the board to boot from RAM (`boot_ramdisk=1`)

configuration:
 * path


**u-boot:** (optional) U-Boot proper. You can use this option if you want Snagrecover to modify **boot** firmware to add U-Boot to it (this is mandatory if you are using a ready-made **boot** firmware from RPi). If your **boot** firmware already contains a U-Boot, you can skip this option.

configuration:
  * path
